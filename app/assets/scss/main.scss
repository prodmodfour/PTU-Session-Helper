@use 'variables' as *;

// ===========================================
// Reset and Base Styles
// ===========================================
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-size: 16px;
  scroll-behavior: smooth;
}

body {
  font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
  background: $gradient-bg-radial;
  background-attachment: fixed;
  color: $color-text;
  line-height: 1.6;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

// ===========================================
// Typography
// ===========================================
h1, h2, h3, h4, h5, h6 {
  font-weight: 600;
  line-height: 1.2;
  margin-bottom: $spacing-md;
  letter-spacing: -0.01em;
}

h1 { font-size: $font-size-xxxl; }
h2 { font-size: $font-size-xxl; }
h3 { font-size: $font-size-xl; }
h4 { font-size: $font-size-lg; }
h5 { font-size: $font-size-md; }
h6 { font-size: $font-size-sm; }

p {
  margin-bottom: $spacing-md;
}

a {
  color: $color-accent;
  text-decoration: none;
  transition: color $transition-fast;

  &:hover {
    color: $color-accent-light;
  }
}

// ===========================================
// Buttons - SV Style with Gradients
// ===========================================
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: $spacing-sm;
  padding: $spacing-sm $spacing-lg;
  border: none;
  border-radius: $border-radius-lg;
  font-size: $font-size-md;
  font-weight: 600;
  cursor: pointer;
  transition: all $transition-normal;
  text-decoration: none;
  position: relative;
  overflow: hidden;

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none !important;
  }

  // Primary button with SV gradient
  &--primary {
    background: $gradient-sv-cool;
    color: $color-text;
    box-shadow: $shadow-md, $shadow-glow-scarlet;

    &:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: $shadow-lg, 0 0 30px rgba(230, 57, 70, 0.4);
    }

    &:active:not(:disabled) {
      transform: translateY(0);
    }
  }

  // Secondary button - glass effect
  &--secondary {
    background: $glass-bg;
    backdrop-filter: $glass-blur;
    color: $color-text;
    border: 1px solid $glass-border;

    &:hover:not(:disabled) {
      background: rgba(45, 45, 74, 0.9);
      border-color: $color-accent;
      transform: translateY(-1px);
    }
  }

  // Danger button
  &--danger {
    background: $gradient-scarlet;
    color: $color-text;
    box-shadow: $shadow-md;

    &:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: $shadow-lg, $shadow-glow-scarlet;
    }
  }

  // Success button
  &--success {
    background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
    color: $color-text;
    box-shadow: $shadow-md;

    &:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: $shadow-lg, 0 0 20px rgba(16, 185, 129, 0.3);
    }
  }

  // Warning button
  &--warning {
    background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
    color: $color-text-dark;
    box-shadow: $shadow-md;

    &:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: $shadow-lg, 0 0 20px rgba(245, 158, 11, 0.3);
    }
  }

  // Accent button (violet/teal for TV display actions)
  &--accent {
    background: linear-gradient(135deg, $color-accent-violet 0%, $color-accent-teal 100%);
    color: $color-text;
    box-shadow: $shadow-md;

    &:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: $shadow-lg, 0 0 20px rgba($color-accent-violet, 0.4);
    }
  }

  // Size variants
  &--sm {
    padding: $spacing-xs $spacing-md;
    font-size: $font-size-sm;
    border-radius: $border-radius-md;
  }

  &--lg {
    padding: $spacing-md $spacing-xl;
    font-size: $font-size-lg;
    border-radius: $border-radius-xl;
  }

  &--icon {
    padding: $spacing-sm;
    aspect-ratio: 1;
    border-radius: $border-radius-md;
  }

  // Icon inside button
  .btn-icon {
    width: 1.2em;
    height: 1.2em;
  }
}

// ===========================================
// Forms - Modern SV Style
// ===========================================
.form-group {
  margin-bottom: $spacing-md;

  label {
    display: block;
    margin-bottom: $spacing-xs;
    font-weight: 500;
    font-size: $font-size-sm;
    color: $color-text-muted;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
}

.form-input {
  width: 100%;
  padding: $spacing-sm $spacing-md;
  background: $color-bg-tertiary;
  border: 2px solid transparent;
  border-radius: $border-radius-md;
  color: $color-text;
  font-size: $font-size-md;
  transition: all $transition-fast;

  &:focus {
    outline: none;
    border-color: $color-accent;
    box-shadow: $shadow-glow-scarlet;
    background: $color-bg-hover;
  }

  &::placeholder {
    color: rgba($color-text-muted, 0.6);
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  &--sm {
    padding: $spacing-xs $spacing-sm;
    font-size: $font-size-sm;
  }
}

.form-select {
  @extend .form-input;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23ff6b9d' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right $spacing-md center;
  padding-right: $spacing-xl;
  cursor: pointer;
}

textarea.form-input {
  resize: vertical;
  min-height: 80px;
}

// ===========================================
// Cards - Glass-morphism Style
// ===========================================
.card {
  background: $glass-bg;
  backdrop-filter: $glass-blur;
  border: 1px solid $glass-border;
  border-radius: $border-radius-xl;
  padding: $spacing-lg;
  box-shadow: $shadow-lg;
  transition: all $transition-normal;

  &:hover {
    border-color: rgba(255, 255, 255, 0.15);
  }

  &--interactive {
    cursor: pointer;

    &:hover {
      transform: translateY(-4px);
      box-shadow: $shadow-xl, $shadow-glow-sv;
      border-color: rgba($color-accent, 0.3);
    }
  }

  &--gradient-border {
    position: relative;
    background: $color-bg-secondary;
    border: none;

    &::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: $border-radius-xl;
      padding: 2px;
      background: $gradient-sv-primary;
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
    }
  }

  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: $spacing-md;
    padding-bottom: $spacing-md;
    border-bottom: 1px solid $border-color-subtle;
  }

  &__title {
    font-size: $font-size-lg;
    font-weight: 600;
    margin: 0;
  }

  &__body {
    margin-bottom: $spacing-md;
  }

  &__footer {
    display: flex;
    gap: $spacing-sm;
    justify-content: flex-end;
    padding-top: $spacing-md;
    border-top: 1px solid $border-color-subtle;
  }
}

// ===========================================
// Grid Utilities
// ===========================================
.grid {
  display: grid;
  gap: $spacing-md;

  &--cols-2 { grid-template-columns: repeat(2, 1fr); }
  &--cols-3 { grid-template-columns: repeat(3, 1fr); }
  &--cols-4 { grid-template-columns: repeat(4, 1fr); }
}

.flex {
  display: flex;

  &--center { align-items: center; justify-content: center; }
  &--between { justify-content: space-between; }
  &--col { flex-direction: column; }
  &--wrap { flex-wrap: wrap; }
  &--gap-sm { gap: $spacing-sm; }
  &--gap-md { gap: $spacing-md; }
  &--gap-lg { gap: $spacing-lg; }
}

// ===========================================
// Health Bar - SV-Inspired Modern Design
// ===========================================
.health-bar {
  height: 24px;
  position: relative;
  display: flex;
  align-items: center;

  // HP Label - Modern style
  &__label {
    width: 36px;
    height: 100%;
    background: linear-gradient(135deg, $color-bg-tertiary 0%, $color-bg-secondary 100%);
    border: 1px solid $border-color-default;
    border-right: none;
    border-radius: $border-radius-md 0 0 $border-radius-md;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    font-weight: 700;
    color: $color-accent;
    text-shadow: 0 0 10px rgba($color-accent, 0.5);
    font-family: 'Inter', 'Segoe UI', sans-serif;
    letter-spacing: 0.5px;
  }

  // Bar Container
  &__container {
    flex: 1;
    height: 100%;
    background: linear-gradient(180deg, $color-bg-tertiary 0%, $color-bg-secondary 100%);
    border: 1px solid $border-color-default;
    border-left: none;
    border-radius: 0 $border-radius-lg $border-radius-lg 0;
    padding: 4px 6px 4px 3px;
    position: relative;
  }

  // Bar Track
  &__track {
    width: 100%;
    height: 100%;
    background: linear-gradient(180deg, $color-bg-primary 0%, darken($color-bg-primary, 2%) 100%);
    border-radius: 0 $border-radius-md $border-radius-md 0;
    overflow: hidden;
    position: relative;
  }

  // Fill Bar - Keep B2W2 gradients for game accuracy
  &__fill {
    height: 100%;
    border-radius: 0 $border-radius-sm $border-radius-sm 0;
    transition: width 0.4s ease-out;
    position: relative;

    // Shine effect
    &::before {
      content: '';
      position: absolute;
      top: 1px;
      left: 0;
      right: 0;
      height: 40%;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.1) 100%);
      border-radius: 0 $border-radius-sm 0 0;
    }

    // Inner shadow
    &::after {
      content: '';
      position: absolute;
      bottom: 1px;
      left: 0;
      right: 0;
      height: 30%;
      background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.3) 100%);
      border-radius: 0 0 $border-radius-sm 0;
    }
  }

  // HP Text
  &__text {
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
    font-weight: 700;
    font-size: 11px;
    color: #ffffff;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.9), 0 0 8px rgba(0, 0, 0, 0.5);
    font-family: 'Inter', 'Segoe UI', sans-serif;
    letter-spacing: 0.5px;
    z-index: 1;
  }

  // Health States - B2W2 color gradients
  &--healthy &__fill {
    background: linear-gradient(180deg, #78e850 0%, #58c838 40%, #40a828 60%, #309818 100%);
  }

  &--warning &__fill {
    background: linear-gradient(180deg, #f8e868 0%, #f8d030 40%, #e8b820 60%, #d0a010 100%);
  }

  &--critical &__fill {
    background: linear-gradient(180deg, #f89890 0%, #f86058 40%, #e84048 60%, #c82838 100%);
    animation: pulse-critical 0.8s ease-in-out infinite;
  }

  &--fainted &__fill {
    background: linear-gradient(180deg, #808890 0%, #606870 40%, #485058 60%, #384048 100%);
  }

  // Size Variants
  &--compact {
    height: 18px;

    .health-bar__label {
      width: 28px;
      font-size: 8px;
    }

    .health-bar__container {
      padding: 3px 4px 3px 2px;
    }

    .health-bar__text {
      font-size: 9px;
      right: 6px;
    }
  }

  &--large {
    height: 32px;

    .health-bar__label {
      width: 44px;
      font-size: 12px;
    }

    .health-bar__text {
      font-size: 13px;
      right: 12px;
    }

    @media (min-width: 3000px) {
      height: 48px;

      .health-bar__label {
        width: 60px;
        font-size: 16px;
      }

      .health-bar__text {
        font-size: 18px;
        right: 16px;
      }
    }
  }
}

@keyframes pulse-critical {
  0%, 100% {
    opacity: 1;
    filter: brightness(1);
  }
  50% {
    opacity: 0.85;
    filter: brightness(1.15);
  }
}

// ===========================================
// Status Badges
// ===========================================
.status-badge {
  display: inline-flex;
  align-items: center;
  gap: $spacing-xs;
  padding: $spacing-xs $spacing-sm;
  border-radius: $border-radius-sm;
  font-size: $font-size-xs;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;

  &--burn { background: linear-gradient(135deg, $type-fire 0%, lighten($type-fire, 10%) 100%); }
  &--freeze { background: linear-gradient(135deg, $type-ice 0%, lighten($type-ice, 10%) 100%); color: $color-text-dark; }
  &--paralysis { background: linear-gradient(135deg, $type-electric 0%, lighten($type-electric, 10%) 100%); color: $color-text-dark; }
  &--poison { background: linear-gradient(135deg, $type-poison 0%, lighten($type-poison, 10%) 100%); }
  &--sleep { background: linear-gradient(135deg, $type-psychic 0%, lighten($type-psychic, 10%) 100%); }
  &--confusion { background: linear-gradient(135deg, $type-ghost 0%, lighten($type-ghost, 10%) 100%); }
  &--flinch { background: linear-gradient(135deg, $type-normal 0%, lighten($type-normal, 10%) 100%); color: $color-text-dark; }
}

// ===========================================
// Pokemon Type Badges - Modern SV Style
// ===========================================
.type-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 3px 8px;
  border-radius: $border-radius-sm;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  color: $color-text;
  text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.3);
  letter-spacing: 0.5px;
  font-family: 'Inter', 'Segoe UI', sans-serif;
  box-shadow: $shadow-sm;
  transition: all $transition-fast;

  &:hover {
    transform: scale(1.05);
  }

  // Type-specific gradients
  &--normal {
    background: linear-gradient(135deg, #bcbc9a 0%, $type-normal 50%, #8a8a5c 100%);
  }
  &--fire {
    background: linear-gradient(135deg, #f5ac78 0%, $type-fire 50%, #c4682a 100%);
  }
  &--water {
    background: linear-gradient(135deg, #9db7f5 0%, $type-water 50%, #4a6fc4 100%);
  }
  &--electric {
    background: linear-gradient(135deg, #fae078 0%, $type-electric 50%, #c4a820 100%);
    color: $color-text-dark;
    text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.3);
  }
  &--grass {
    background: linear-gradient(135deg, #a7db8d 0%, $type-grass 50%, #5ca040 100%);
  }
  &--ice {
    background: linear-gradient(135deg, #bce8e8 0%, $type-ice 50%, #6cb8b8 100%);
    color: $color-text-dark;
    text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.3);
  }
  &--fighting {
    background: linear-gradient(135deg, #d67873 0%, $type-fighting 50%, #981820 100%);
  }
  &--poison {
    background: linear-gradient(135deg, #c183c1 0%, $type-poison 50%, #803080 100%);
  }
  &--ground {
    background: linear-gradient(135deg, #ebd69d 0%, $type-ground 50%, #b89838 100%);
    color: $color-text-dark;
    text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.3);
  }
  &--flying {
    background: linear-gradient(135deg, #c6b7f5 0%, $type-flying 50%, #8068c0 100%);
  }
  &--psychic {
    background: linear-gradient(135deg, #fa92b2 0%, $type-psychic 50%, #c84060 100%);
  }
  &--bug {
    background: linear-gradient(135deg, #c6d16e 0%, $type-bug 50%, #809018 100%);
  }
  &--rock {
    background: linear-gradient(135deg, #d1c17d 0%, $type-rock 50%, #907828 100%);
  }
  &--ghost {
    background: linear-gradient(135deg, #a292bc 0%, $type-ghost 50%, #504070 100%);
  }
  &--dragon {
    background: linear-gradient(135deg, #a27dfa 0%, $type-dragon 50%, #5028c8 100%);
  }
  &--dark {
    background: linear-gradient(135deg, #a29288 0%, $type-dark 50%, #504038 100%);
  }
  &--steel {
    background: linear-gradient(135deg, #d1d1e0 0%, $type-steel 50%, #9090a8 100%);
    color: $color-text-dark;
    text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.3);
  }
  &--fairy {
    background: linear-gradient(135deg, #f4bdc9 0%, $type-fairy 50%, #c07888 100%);
  }

  // Size variant
  &--sm {
    font-size: 8px;
    padding: 2px 5px;
  }

  &--lg {
    font-size: 12px;
    padding: 4px 12px;
    border-radius: $border-radius-md;
  }
}

// ===========================================
// Navigation Styles
// ===========================================
.nav-link {
  display: flex;
  align-items: center;
  gap: $spacing-sm;
  padding: $spacing-sm $spacing-md;
  color: $color-text-muted;
  font-weight: 500;
  border-radius: $border-radius-md;
  transition: all $transition-fast;
  text-decoration: none;

  &:hover {
    color: $color-text;
    background: $color-bg-hover;
  }

  &--active {
    color: $color-text;
    background: $gradient-sv-cool;
    box-shadow: $shadow-glow-scarlet;
  }

  .nav-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
  }
}

// ===========================================
// Modal Styles
// ===========================================
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: $z-index-modal;
  animation: fadeIn 0.2s ease;
}

.modal {
  background: $color-bg-secondary;
  border: 1px solid $border-color-default;
  border-radius: $border-radius-xl;
  width: 100%;
  max-width: 500px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  box-shadow: $shadow-xl, $shadow-glow-sv;
  animation: slideUp 0.3s ease;

  &--large {
    max-width: 700px;
  }

  &--small {
    max-width: 400px;
  }

  &__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: $spacing-lg;
    border-bottom: 1px solid $border-color-subtle;

    h2 {
      margin: 0;
      font-size: $font-size-xl;
    }
  }

  &__body {
    flex: 1;
    overflow-y: auto;
    padding: $spacing-lg;
  }

  &__footer {
    display: flex;
    justify-content: flex-end;
    gap: $spacing-md;
    padding: $spacing-lg;
    border-top: 1px solid $border-color-subtle;
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// ===========================================
// Badges
// ===========================================
.badge {
  display: inline-flex;
  align-items: center;
  padding: $spacing-xs $spacing-sm;
  border-radius: $border-radius-sm;
  font-size: $font-size-xs;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;

  &--teal { background: $gradient-teal; }
  &--violet { background: $gradient-violet; }
  &--scarlet { background: $gradient-scarlet; }
  &--blue { background: linear-gradient(135deg, $color-info 0%, lighten($color-info, 10%) 100%); }
  &--red { background: $gradient-scarlet; }
  &--green { background: linear-gradient(135deg, $color-success 0%, lighten($color-success, 10%) 100%); }
  &--yellow { background: linear-gradient(135deg, $color-warning 0%, lighten($color-warning, 10%) 100%); color: $color-text-dark; }
  &--gray { background: $color-bg-tertiary; }
}

// ===========================================
// Glow Utilities
// ===========================================
.glow {
  &-teal { box-shadow: $shadow-glow-scarlet; }
  &-violet { box-shadow: $shadow-glow-violet; }
  &-scarlet { box-shadow: $shadow-glow-scarlet; }
  &-sv { box-shadow: $shadow-glow-sv; }
}

.gradient-text {
  background: $gradient-sv-primary;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-cool {
  background: $gradient-sv-cool;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

// ===========================================
// Tabs
// ===========================================
.tabs {
  display: flex;
  gap: $spacing-xs;
  padding: $spacing-xs;
  background: $color-bg-tertiary;
  border-radius: $border-radius-lg;
}

.tab {
  flex: 1;
  padding: $spacing-sm $spacing-md;
  background: transparent;
  border: none;
  border-radius: $border-radius-md;
  color: $color-text-muted;
  font-weight: 500;
  cursor: pointer;
  transition: all $transition-fast;

  &:hover {
    color: $color-text;
    background: $color-bg-hover;
  }

  &--active {
    background: $gradient-sv-cool;
    color: $color-text;
    box-shadow: $shadow-sm;
  }
}

// ===========================================
// Scrollbar Styling
// ===========================================
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: $color-bg-primary;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: $color-bg-tertiary;
  border-radius: 4px;
  border: 2px solid $color-bg-primary;

  &:hover {
    background: $color-accent;
  }
}

// ===========================================
// Text Utilities
// ===========================================
.text-center { text-align: center; }
.text-right { text-align: right; }
.text-muted { color: $color-text-muted; }
.text-accent { color: $color-accent; }
.text-success { color: $color-success; }
.text-warning { color: $color-warning; }
.text-danger { color: $color-danger; }

// ===========================================
// Spacing Utilities
// ===========================================
.mt-sm { margin-top: $spacing-sm; }
.mt-md { margin-top: $spacing-md; }
.mt-lg { margin-top: $spacing-lg; }
.mb-sm { margin-bottom: $spacing-sm; }
.mb-md { margin-bottom: $spacing-md; }
.mb-lg { margin-bottom: $spacing-lg; }

.p-sm { padding: $spacing-sm; }
.p-md { padding: $spacing-md; }
.p-lg { padding: $spacing-lg; }

.w-full { width: 100%; }
.h-full { height: 100%; }

// ===========================================
// Animation Utilities
// ===========================================
.animate-pulse {
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.animate-spin {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.animate-bounce {
  animation: bounce 1s ease-in-out infinite;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

// ===========================================
// Focus Visible for Accessibility
// ===========================================
:focus-visible {
  outline: 2px solid $color-accent;
  outline-offset: 2px;
}

button:focus:not(:focus-visible),
a:focus:not(:focus-visible) {
  outline: none;
}
