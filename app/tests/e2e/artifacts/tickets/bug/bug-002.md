---
ticket_id: bug-002
type: bug
priority: P1
status: resolved
source: code-review-035
created_at: 2026-02-18T22:30:00
---

## Summary

CSV parser reads the same cell (row 33, col 13) for both `swim` and `sky` capabilities. All CSV-imported Pokemon get `sky = swim` instead of the correct sky value.

## Evidence

`app/server/services/csv-import.service.ts:252-253`:
```typescript
swim: parseNumber(getCell(rows, 33, 13)) || 0,
sky: parseNumber(getCell(rows, 33, 13)) || 0,   // BUG: same cell as swim
```

## Expected

`sky` should read from a different cell. Likely row 33, col 14 (or wherever the PTU character sheet CSV places the Sky capability), not the same cell as swim.

## Fix

Determine the correct cell coordinates for Sky in the PTU character sheet CSV format, then update the column index. Requires inspecting an actual exported PTU character sheet CSV to confirm the cell layout.

## Impact

All Pokemon imported via CSV that have Sky capability get the wrong value. Flying Pokemon (e.g., Pidgey with Sky 7) would show Sky = swim value instead.

## Fix Log

- **Commit:** 3d7413b
- **File:** `app/server/services/csv-import.service.ts`
- **Root cause:** Multiple capability cell references were wrong. The PTU sheet has 3 rows of capabilities (32-34) with labels in even cols and values in odd cols. swim was reading row 33 (sky's row) instead of row 34. Additionally fixed burrow, levitate, power, and jump which had similar off-by-one row/col errors.
- **Changes:** swim → (34,13), burrow → (33,15), levitate → (32,15), power → (32,17), jump → (34,15). Verified against actual exported PTU CSV (sabre.csv / Alolan Vulpix).
- **Also closes:** bug-001, ptu-rule-030 (all same issue)
