---
ticket_id: bug-002
type: bug
priority: P1
status: in-progress
source: code-review-035
created_at: 2026-02-18T22:30:00
---

## Summary

CSV parser reads the same cell (row 33, col 13) for both `swim` and `sky` capabilities. All CSV-imported Pokemon get `sky = swim` instead of the correct sky value.

## Evidence

`app/server/services/csv-import.service.ts:252-253`:
```typescript
swim: parseNumber(getCell(rows, 33, 13)) || 0,
sky: parseNumber(getCell(rows, 33, 13)) || 0,   // BUG: same cell as swim
```

## Expected

`sky` should read from a different cell. Likely row 33, col 14 (or wherever the PTU character sheet CSV places the Sky capability), not the same cell as swim.

## Fix

Determine the correct cell coordinates for Sky in the PTU character sheet CSV format, then update the column index. Requires inspecting an actual exported PTU character sheet CSV to confirm the cell layout.

## Impact

All Pokemon imported via CSV that have Sky capability get the wrong value. Flying Pokemon (e.g., Pidgey with Sky 7) would show Sky = swim value instead.

## Fix Log

- **Commit 1 (WRONG):** 3d7413b — all row indices off by +1 (used rows 32/33/34). rules-review-034 found every capability reading the wrong cell. Regressions: swim, burrow (catastrophic — "1/2" parsed as 12), jump all broken.
- **Commit 2:** 3896a22 — corrected all row indices by -1. Correct layout is rows 31/32/33:
  - overland → (31,13), levitate → (31,15), power → (31,17)
  - sky → (32,13), burrow → (32,15)
  - swim → (33,13), jump → (33,15)
- **Verified:** sabre.csv (Alolan Vulpix) → overland=4, swim=2, sky=0, burrow=0, levitate=0, power=2, jump={1,2}
- **Also fixes:** bug-001, ptu-rule-030
