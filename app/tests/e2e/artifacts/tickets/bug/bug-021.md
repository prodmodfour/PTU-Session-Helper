---
ticket_id: bug-021
priority: P3
severity: LOW
status: resolved
domain: capture
matrix_source:
  rule_id: capture-R032
  audit_file: matrix/capture-audit.md
created_at: 2026-02-19
created_by: orchestrator
---

## Summary

Capture attempt UI is disconnected from the encounter action economy. Throwing a Poke Ball does not consume a Standard Action from the trainer's turn.

## Expected Behavior (PTU Rules)

Per PTU Core: throwing a Poke Ball is a Standard Action. After capturing, the trainer should not be able to take another Standard Action that turn.

## Actual Behavior

The capture UI operates independently of the combat turn tracker. A trainer can capture a Pokemon and still take a standard action in the same turn.

## Affected Files

- `app/composables/useCapture.ts` — capture flow
- Combat turn/action tracking system

## PTU Reference

- Core Chapter 9 — Capture Mechanics, Action Economy

## Fix Log

**2026-02-20** — Added optional `encounterContext` parameter to `attemptCapture()` in `app/composables/useCapture.ts`. When `encounterId` and `trainerCombatantId` are provided, the composable calls `POST /api/encounters/{id}/action` with `actionType: 'standard'` after the capture API succeeds, consuming the trainer's standard action per PTU Core (p227). No duplicate code paths found -- all capture attempts go through `useCapture.ts`. Commit: 11fc717.
