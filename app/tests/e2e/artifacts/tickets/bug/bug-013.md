---
ticket_id: bug-013
priority: P2
severity: MEDIUM
status: resolved
domain: capture
matrix_source:
  rule_id: capture-R015
  audit_file: matrix/capture-audit.md
created_at: 2026-02-19
created_by: orchestrator
---

## Summary

Trapped condition incorrectly grants a +10 capture rate bonus. PTU only specifies this bonus for the Stuck condition, not Trapped. These are distinct conditions with different mechanical effects.

## Expected Behavior (PTU Rules)

Per PTU capture rate formula: Stuck grants +10 to capture rate. Trapped is a separate condition that does not appear in the capture modifier table.

## Actual Behavior

Both Stuck and Trapped grant +10 to capture rate in the app's capture rate calculation.

## Affected Files

- `app/utils/captureRate.ts` — capture rate modifier lookup

## PTU Reference

- Core Chapter 9 — Capture Rate Formula, Status Condition Modifiers

## Resolution Log

- **Commit:** b2f6c80
- **Fixed in:**
  - `app/utils/captureRate.ts` — removed `'Trapped'` from `STUCK_CONDITIONS` array (server-side path via `calculateCaptureRate`)
  - `app/composables/useCapture.ts` — removed `condition === 'Trapped'` from inline stuck check in `calculateCaptureRateLocal` (client-side path)
- **Duplicate code path check:** Searched entire `app/` directory for all references to Trapped in capture context. Two code paths found and fixed: the utility function (used by the server API endpoint `server/api/capture/rate.post.ts`) and the composable's local calculation. No additional locations found in `app/server/`.
- **PTU verification:** Book text (05-pokemon.md line 1733) confirms: "Stuck adds +10 to Capture Rate, and Slow adds +5." Trapped is not listed.
