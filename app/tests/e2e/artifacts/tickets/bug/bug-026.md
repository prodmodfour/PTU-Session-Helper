---
ticket_id: bug-026
priority: P2
severity: MEDIUM
status: open
domain: combat
matrix_source:
  related_tickets: [bug-024]
  discovered_by: code-review-059
created_at: 2026-02-19
created_by: orchestrator
---

## Summary

Encounter template load endpoint uses incorrect field names and data shapes for human combatants, causing type mismatches with the `Combatant` and `HumanCharacter` types used by downstream consumers.

## Issues (3)

### 1. `injuries` field uses wrong shape

Template load creates `injuries: { count: 0, max: 10 }` but:
- `Combatant` type expects `InjuryState` with `{ count, sources }` shape
- `HumanCharacter` entity uses a plain `number` for injuries

### 2. `combatStages` instead of `stageModifiers`

Template load uses field name `combatStages` but the `Combatant` type uses `stageModifiers`.

### 3. `tempHp` instead of `temporaryHp`

Template load uses field name `tempHp` but `HumanCharacter` type uses `temporaryHp`.

## Affected Files

- `app/server/api/encounter-templates/[id]/load.post.ts` â€” inline human combatant construction

## Fix Direction

Align the field names and shapes with the actual `Combatant` and `HumanCharacter` types. Check all field names in the template load human combatant object against the type definitions.
